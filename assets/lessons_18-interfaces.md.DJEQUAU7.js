import{_ as i,o as e,c as a,a0 as t}from"./chunks/framework.6sfUeJuU.js";const c=JSON.parse('{"title":"Chapter 18: Interfaces","description":"","frontmatter":{},"headers":[],"relativePath":"lessons/18-interfaces.md","filePath":"lessons/18-interfaces.md"}'),n={name:"lessons/18-interfaces.md"};function o(r,s,l,h,p,d){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="chapter-18-interfaces" tabindex="-1">Chapter 18: Interfaces <a class="header-anchor" href="#chapter-18-interfaces" aria-label="Permalink to &quot;Chapter 18: Interfaces&quot;">â€‹</a></h1><h2 id="_18-1-the-implicit-contract-duck-typing" tabindex="-1">18.1 The Implicit Contract (Duck Typing) <a class="header-anchor" href="#_18-1-the-implicit-contract-duck-typing" aria-label="Permalink to &quot;18.1 The Implicit Contract (Duck Typing)&quot;">â€‹</a></h2><p>In strict languages (Java, C++), you must <strong>explicitly</strong> sign the contract. <code>class MyStore implements BookRepository</code>.</p><p>In Go, the contract is <strong>implicit</strong>. This is called &quot;Duck Typing&quot;.</p><blockquote><p><em>&quot;If it walks like a duck and quacks like a duck, it is a duck.&quot;</em></p></blockquote><p>If your struct has the methods <code>GetAll()</code> and <code>GetByID()</code>, Go automatically considers it a <code>BookRepository</code>.</p><h3 id="anatomy-of-an-interface" tabindex="-1">Anatomy of an Interface <a class="header-anchor" href="#anatomy-of-an-interface" aria-label="Permalink to &quot;Anatomy of an Interface&quot;">â€‹</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BookRepository</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    GetAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() ([]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Book</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    GetByID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Book</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol><li><strong><code>type</code></strong>: New Type Definition.</li><li><strong><code>BookRepository</code></strong>: The name (Contract Name).</li><li><strong><code>interface</code></strong>: The Kind. It contains only Method Signatures, no code.</li><li><strong><code>GetByID</code></strong>: Method Name.</li><li><strong><code>(id string)</code></strong>: Usage requirements (Input).</li><li><strong><code>(Book, error)</code></strong>: Expected result (Output).</li></ol><h3 id="where-to-define-interfaces" tabindex="-1">Where to Define Interfaces? <a class="header-anchor" href="#where-to-define-interfaces" aria-label="Permalink to &quot;Where to Define Interfaces?&quot;">â€‹</a></h3><p>Beginners often define the interface in the <strong>Implementation</strong> package (e.g., inside <code>store/</code>). <strong>Idiomatic Go</strong>: Define the interface where it is <strong>USED</strong> (e.g., in <code>main.go</code> or <code>api/</code>), not where it is implemented.</p><ul><li><strong>Java</strong>: Producer defines the interface.</li><li><strong>Go</strong>: Consumer defines the interface. <em>(Note: In this project, we keep it in <code>store/</code> for simplicity, but strictly speaking, <code>main</code> should define what it needs).</em></li></ul><h2 id="_18-2-dependency-injection-di" tabindex="-1">18.2 Dependency Injection (DI) <a class="header-anchor" href="#_18-2-dependency-injection-di" aria-label="Permalink to &quot;18.2 Dependency Injection (DI)&quot;">â€‹</a></h2><p>Big phrase, simple concept. <strong>Don&#39;t build your tools inside your house. Buy them and bring them in.</strong></p><p><strong>Bad (Tight Coupling)</strong>:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NewHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    repo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PostgresStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{} </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Hardcoded! Can&#39;t switch to Memory.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{repo: repo}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Good (Dependency Injection)</strong>:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NewHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">repo</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BookRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{repo: repo} </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Flexible! Accepts any repo.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Now <code>main.go</code> decides which tool to use.</p><details class="details custom-block"><summary>ðŸŽ“ Knowledge Check: Why do we use Interfaces for Dependency Injection?</summary><p><strong>Answer</strong>: To decouple our code. If <code>Handler</code> depends on an <code>Interface</code>, we can swap the real database for a &quot;Fake Database&quot; (Mock) during testing, or switch from Postgres to MySQL without rewriting the Handler.</p></details>`,20)])])}const g=i(n,[["render",o]]);export{c as __pageData,g as default};

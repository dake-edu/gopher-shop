import{_ as s,o,c as t,ae as a}from"./chunks/framework.CfVLvsAT.js";const g=JSON.parse('{"title":"13. The Warehouse (PostgreSQL)","description":"","frontmatter":{},"headers":[],"relativePath":"postgres.md","filePath":"postgres.md"}'),i={name:"postgres.md"};function n(l,e,r,h,p,d){return o(),t("div",null,[...e[0]||(e[0]=[a('<h1 id="_13-the-warehouse-postgresql" tabindex="-1">13. The Warehouse (PostgreSQL) <a class="header-anchor" href="#_13-the-warehouse-postgresql" aria-label="Permalink to &quot;13. The Warehouse (PostgreSQL)&quot;">​</a></h1><h2 id="_13-1-the-low-level-driver" tabindex="-1">13.1 The Low-Level Driver <a class="header-anchor" href="#_13-1-the-low-level-driver" aria-label="Permalink to &quot;13.1 The Low-Level Driver&quot;">​</a></h2><p>To talk to a SQL database, Go uses the standard package <code>database/sql</code>. However, <code>database/sql</code> is just a <strong>Manager</strong>. It needs a worker (Driver) to speak the specific language of PostgreSQL.</p><p>We import the driver <strong>Blankly</strong>:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/lib/pq</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span></code></pre></div><h3 id="anatomy-of-the-blank-import" tabindex="-1">Anatomy of the Blank Import (<code>_</code>) <a class="header-anchor" href="#anatomy-of-the-blank-import" aria-label="Permalink to &quot;Anatomy of the Blank Import (`_`)&quot;">​</a></h3><ol><li><strong><code>import</code></strong>: Bring in code.</li><li><strong><code>_</code> (Underscore)</strong>: &quot;I am not going to call this package directly in my code.&quot; <ul><li><em>Why?</em> We only want the package&#39;s <code>init()</code> function to run.</li><li>Inside <code>lib/pq</code>, the <code>init()</code> function registers itself with Go&#39;s SQL Manager: &quot;Hey, I know how to talk to Postgres!&quot;</li></ul></li></ol><h2 id="_13-2-connection-pooling-sql-open" tabindex="-1">13.2 Connection Pooling (<code>sql.Open</code>) <a class="header-anchor" href="#_13-2-connection-pooling-sql-open" aria-label="Permalink to &quot;13.2 Connection Pooling (`sql.Open`)&quot;">​</a></h2><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sql.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;postgres&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user=dake dbname=shop...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>Crucial Concept</strong>: <code>sql.Open</code> does NOT establish a connection. It prepares a <strong>Connection Pool</strong>.</p><ul><li>It opens connections only when needed.</li><li>It keeps them open for reuse (Performance).</li><li>It handles network drops automatically.</li></ul><p>Comparison:</p><ul><li><strong>Python/Django</strong>: Often opens a new connection per request (Slow).</li><li><strong>Go</strong>: Maintains a pool of long-lived connections (Fast).</li></ul>',13)])])}const k=s(i,[["render",n]]);export{g as __pageData,k as default};
